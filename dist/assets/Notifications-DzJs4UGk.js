import{r as i,a as l,u as t,j as e,V as y,f as d,C as u,e as x,v as b,b as C,c as w,d as R}from"./index-iCWoet6q.js";import{B as h}from"./badge-DRYRsU4i.js";import{C as v}from"./check-circle-BtqlqyTD.js";function S(){const[r,c]=i.useState([]),[f,o]=i.useState(!0),[m,n]=i.useState(0);i.useEffect(()=>{j()},[]);const j=async()=>{o(!0);try{const s=await l.get("/admin/notifications");s.data.success&&(c(s.data.notifications||[]),n(s.data.unreadCount||0))}catch{t.error("Failed to fetch notifications")}finally{o(!1)}},N=async s=>{try{await l.patch(`/admin/notifications/${s}/read`),c(r.map(a=>a._id===s?{...a,isRead:!0}:a)),n(Math.max(0,m-1)),t.success("Notification marked as read")}catch{t.error("Failed to update notification")}},g=async()=>{try{await l.patch("/admin/notifications/read-all"),c(r.map(s=>({...s,isRead:!0}))),n(0),t.success("All notifications marked as read")}catch{t.error("Failed to update notifications")}},p=s=>{const a={PLAN_EXPIRY:"bg-orange-500",JOB_UPDATE:"bg-blue-500",SUPPORT_RESPONSE:"bg-green-500",SYSTEM_ALERT:"bg-red-500",PAYMENT_REMINDER:"bg-yellow-500"};return e.jsx(h,{className:a[s]||"bg-gray-500",children:s.replace("_"," ")})};return f?e.jsx("div",{className:"flex justify-center items-center w-full",children:e.jsx(y,{size:"section"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Notifications"}),e.jsx("p",{className:"text-muted-foreground",children:"Stay updated with your business activities"})]}),m>0&&e.jsx(d,{onClick:g,variant:"outline",children:"Mark All as Read"})]}),r.length===0?e.jsx(u,{children:e.jsxs(x,{className:"flex flex-col items-center justify-center py-12",children:[e.jsx(b,{className:"h-12 w-12 text-muted-foreground mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"No notifications yet"})]})}):e.jsx("div",{className:"space-y-4",children:r.map(s=>e.jsxs(u,{className:s.isRead?"":"border-blue-500",children:[e.jsx(C,{children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(w,{className:"text-lg",children:s.title}),p(s.type),!s.isRead&&e.jsx(h,{variant:"default",className:"bg-blue-500",children:"New"})]}),e.jsx(R,{children:new Date(s.createdAt).toLocaleString()})]}),!s.isRead&&e.jsx(d,{variant:"ghost",size:"sm",onClick:()=>N(s._id),children:e.jsx(v,{className:"h-4 w-4"})})]})}),e.jsxs(x,{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:s.message}),s.link&&e.jsx(d,{variant:"link",className:"mt-2 p-0",onClick:()=>window.location.href=s.link,children:"View Details â†’"})]})]},s._id))})]})}export{S as default};
