const i="https://server.vashq.com/api";async function c(s,n=9e4){const l=`${i.replace(/\/$/,"")}/admin/upload/images`,o=typeof localStorage<"u"?localStorage.getItem("token"):null;if(!o)throw new Error("Not authenticated");const t=new AbortController,a=setTimeout(()=>t.abort(),n);try{const r=await fetch(l,{method:"POST",headers:{Authorization:`Bearer ${o}`},body:s,signal:t.signal,credentials:"include"});clearTimeout(a);const e=await r.json().catch(()=>({}));if(!r.ok)throw new Error((e==null?void 0:e.message)||r.statusText||"Upload failed");if(!e.success||!Array.isArray(e.urls))throw new Error((e==null?void 0:e.message)||"Upload failed");return e}catch(r){throw clearTimeout(a),r.name==="AbortError"?new Error("Upload timed out. Try fewer or smaller images."):r}}export{c as u};
