import{r as n,j as e,K as j,C as f,b as C,c as v,d as y,e as N,p as P,L as d,g as o,f as b,V as S,u as a,a as F}from"./index-DqxcJu2F.js";function q(){const[i,l]=n.useState(""),[r,c]=n.useState(""),[u,m]=n.useState(""),[p,w]=n.useState(!1),g=async s=>{var h,x;if(s.preventDefault(),r.length<6){a.error("New password must be at least 6 characters");return}if(r!==u){a.error("New passwords do not match");return}w(!0);try{const t=await F.put("/auth/me/password",{currentPassword:i,newPassword:r});t.data.success?(a.success("Password updated successfully"),l(""),c(""),m("")):a.error(t.data.message||"Failed to update password")}catch(t){a.error(((x=(h=t.response)==null?void 0:h.data)==null?void 0:x.message)||"Failed to update password")}finally{w(!1)}};return e.jsxs("div",{className:"space-y-6 max-w-md",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-semibold tracking-tight flex items-center gap-2",children:[e.jsx(j,{className:"h-7 w-7"}),"Change Password"]}),e.jsx("p",{className:"text-muted-foreground text-sm",children:"Update your login password. You will need to sign in again after changing it if your session expires."})]}),e.jsxs(f,{children:[e.jsxs(C,{children:[e.jsx(v,{children:"New password"}),e.jsx(y,{children:"Enter your current password and choose a new one."})]}),e.jsx(N,{children:e.jsxs("form",{onSubmit:g,onKeyDown:P,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(d,{htmlFor:"current",children:"Current password *"}),e.jsx(o,{id:"current",value:i,onChange:s=>l(s.target.value),required:!0,autoComplete:"current-password"})]}),e.jsxs("div",{children:[e.jsx(d,{htmlFor:"new",children:"New password *"}),e.jsx(o,{id:"new",value:r,onChange:s=>c(s.target.value),required:!0,minLength:6,autoComplete:"new-password"}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"At least 6 characters"})]}),e.jsxs("div",{children:[e.jsx(d,{htmlFor:"confirm",children:"Confirm new password *"}),e.jsx(o,{id:"confirm",value:u,onChange:s=>m(s.target.value),required:!0,minLength:6,autoComplete:"new-password"})]}),e.jsxs(b,{type:"submit",disabled:p,children:[p?e.jsx(S,{size:"inline",className:"mr-2"}):null,"Update password"]})]})})]})]})}export{q as default};
