const l="https://server.vashq.com/api",u=12582912;async function m(a,n=12e4){const c=`${l.replace(/\/$/,"")}/admin/upload/images`,o=typeof localStorage<"u"?localStorage.getItem("token"):null;if(!o)throw new Error("Not authenticated");const t=new AbortController,s=setTimeout(()=>t.abort(),n);try{const r=await fetch(c,{method:"POST",headers:{Authorization:`Bearer ${o}`},body:a,signal:t.signal,credentials:"include"});clearTimeout(s);const e=await r.json().catch(()=>({}));if(!r.ok){const i=r.status===413?(e==null?void 0:e.message)||"Images too large. Use images under 12MB each.":(e==null?void 0:e.message)||r.statusText||"Upload failed";throw new Error(i)}if(!e.success||!Array.isArray(e.urls))throw new Error((e==null?void 0:e.message)||"Upload failed");return e}catch(r){throw clearTimeout(s),r.name==="AbortError"?new Error("Upload timed out. Try fewer or smaller images (under 12MB each)."):r.message==="Failed to fetch"?new Error("Network error or images too large. Use images under 12MB each and check your connection."):r}}export{u as M,m as u};
