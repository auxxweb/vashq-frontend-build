import{j as e,h as te,r as n,a as T,u as c,V as ae,f as o,P as re,p as $,L as d,I as w,C as A,e as F,b as ne,c as ce}from"./index-DbUb8UN5.js";import{N as p}from"./number-input-D03p4g5G.js";import{D as q,e as le,a as B,b as W,c as R,d as _,f as H}from"./dialog-BiDWtJbd.js";import{S as oe}from"./StatusBadge-ChIJ-bKC.js";import{f as de}from"./currencyUtils-CJd_f-r_.js";import{S as K}from"./search-C0WoRWcq.js";import{P as me}from"./pen-square-C3yiKAlw.js";import{T as xe}from"./trash-2-D7ukQ_pm.js";import{C as he,a as ue}from"./chevron-right-D0odm891.js";const V={empty:e.jsxs("svg",{className:"w-32 h-24 mx-auto text-muted-foreground/60",viewBox:"0 0 160 120",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("rect",{x:"20",y:"40",width:"120",height:"60",rx:"8",stroke:"currentColor",strokeWidth:"1.5",fill:"none",opacity:"0.5"}),e.jsx("path",{d:"M50 70h60M50 80h40",stroke:"currentColor",strokeWidth:"1",strokeLinecap:"round",opacity:"0.4"}),e.jsx("circle",{cx:"80",cy:"55",r:"12",stroke:"currentColor",strokeWidth:"1",fill:"none",opacity:"0.4"})]}),search:e.jsxs("svg",{className:"w-32 h-24 mx-auto text-muted-foreground/60",viewBox:"0 0 160 120",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("circle",{cx:"55",cy:"55",r:"28",stroke:"currentColor",strokeWidth:"1.5",fill:"none",opacity:"0.5"}),e.jsx("path",{d:"M75 75l35 35",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",opacity:"0.5"}),e.jsx("path",{d:"M30 95V70h12M50 50H28",stroke:"currentColor",strokeWidth:"1",opacity:"0.3"})]}),chart:e.jsxs("svg",{className:"w-32 h-24 mx-auto text-muted-foreground/60",viewBox:"0 0 160 120",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("rect",{x:"30",y:"60",width:"24",height:"40",rx:"4",fill:"currentColor",opacity:"0.3"}),e.jsx("rect",{x:"68",y:"40",width:"24",height:"60",rx:"4",fill:"currentColor",opacity:"0.4"}),e.jsx("rect",{x:"106",y:"20",width:"24",height:"80",rx:"4",fill:"currentColor",opacity:"0.25"})]})};function pe({title:h,description:S,illustration:u="empty",action:j,className:m,...g}){const C=typeof u=="string"?V[u]||V.empty:u;return e.jsxs("div",{className:te("flex flex-col items-center justify-center py-10 px-6 text-center",m),...g,children:[C,h&&e.jsx("p",{className:"mt-4 text-sm font-medium text-foreground",children:h}),S&&e.jsx("p",{className:"mt-1 text-sm text-muted-foreground max-w-sm",children:S}),j&&e.jsx("div",{className:"mt-4",children:j})]})}const L=12;function Ce(){const[h,S]=n.useState([]),[u,j]=n.useState(!0),[m,g]=n.useState(""),[C,P]=n.useState(""),[x,b]=n.useState(1),[v,G]=n.useState({total:0,totalPages:0}),[Z,J]=n.useState("USD"),[Q,E]=n.useState(!1),[X,k]=n.useState(!1),[M,z]=n.useState(null),[i,r]=n.useState({name:"",price:0,minTime:"",maxTime:"",description:"",isActive:!0});n.useEffect(()=>{D()},[m,x]),n.useEffect(()=>{T.get("/admin/settings").then(s=>{var t,a;(t=s.data)!=null&&t.success&&((a=s.data.settings)!=null&&a.currency)&&J(s.data.settings.currency)}).catch(()=>{})},[]);const D=async()=>{var s,t;j(!0);try{const a=new URLSearchParams;a.set("page",String(x)),a.set("limit",String(L)),m.trim()&&a.set("search",m.trim());const l=await T.get(`/admin/services?${a.toString()}`);l.data.success?(S(l.data.services||[]),l.data.pagination&&G({total:l.data.pagination.total,totalPages:l.data.pagination.totalPages})):c.error("Failed to load services")}catch(a){c.error(((t=(s=a.response)==null?void 0:s.data)==null?void 0:t.message)||"Failed to load services")}finally{j(!1)}},I=s=>{s==null||s.preventDefault(),g(C),b(1)},O=s=>{s<1||s>v.totalPages||b(s)},Y=async s=>{var f,y;s.preventDefault();const t=Number(i.price);if(!t||t===0){c.error("Price must be greater than zero");return}const a=i.minTime===""||i.minTime===void 0?void 0:Number(i.minTime),l=i.maxTime===""||i.maxTime===void 0?void 0:Number(i.maxTime);try{(await T.post("/admin/services",{...i,price:t,minTime:a,maxTime:l})).data.success?(c.success("Service created successfully!"),E(!1),U(),D()):c.error("Failed to create service")}catch(N){c.error(((y=(f=N.response)==null?void 0:f.data)==null?void 0:y.message)||"Failed to create service")}},ee=async s=>{var f,y;if(s.preventDefault(),!M)return;const t=Number(i.price);if(!t||t===0){c.error("Price must be greater than zero");return}const a=i.minTime===""||i.minTime===void 0?void 0:Number(i.minTime),l=i.maxTime===""||i.maxTime===void 0?void 0:Number(i.maxTime);try{(await T.put(`/admin/services/${M._id}`,{...i,price:t,minTime:a,maxTime:l})).data.success?(c.success("Service updated successfully!"),k(!1),z(null),U(),D()):c.error("Failed to update service")}catch(N){c.error(((y=(f=N.response)==null?void 0:f.data)==null?void 0:y.message)||"Failed to update service")}},se=s=>{z(s),r({name:s.name,price:s.price,minTime:s.minTime??"",maxTime:s.maxTime??"",description:s.description||"",isActive:s.isActive!==!1}),k(!0)},ie=async s=>{var t,a;if(confirm("Are you sure you want to delete this service?"))try{(await T.delete(`/admin/services/${s}`)).data.success?(c.success("Service deleted successfully!"),D()):c.error("Failed to delete service")}catch(l){c.error(((a=(t=l.response)==null?void 0:t.data)==null?void 0:a.message)||"Failed to delete service")}},U=()=>{r({name:"",price:0,minTime:"",maxTime:"",description:"",isActive:!0})};return u?e.jsx("div",{className:"flex justify-center items-center w-full",children:e.jsx(ae,{size:"section"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Services"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage your services"})]}),e.jsxs(q,{open:Q,onOpenChange:E,children:[e.jsx(le,{asChild:!0,children:e.jsxs(o,{size:"default",className:"gap-2",children:[e.jsx(re,{className:"h-4 w-4"}),"Add Service"]})}),e.jsxs(B,{children:[e.jsxs(W,{children:[e.jsx(R,{children:"Create New Service"}),e.jsx(_,{children:"Add a new service to your catalog"})]}),e.jsx(H,{children:e.jsxs("form",{onSubmit:Y,onKeyDown:$,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"name",children:"Service Name *"}),e.jsx(w,{id:"name",value:i.name,onChange:s=>r({...i,name:s.target.value}),required:!0})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"price",children:"Price *"}),e.jsx(p,{id:"price",decimal:!0,value:i.price,onChange:s=>r({...i,price:s}),required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"minTime",children:"Min Time (min, optional)"}),e.jsx(p,{id:"minTime",value:i.minTime,onChange:s=>r({...i,minTime:s})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"maxTime",children:"Max Time (min, optional)"}),e.jsx(p,{id:"maxTime",value:i.maxTime,onChange:s=>r({...i,maxTime:s})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"description",children:"Description"}),e.jsx(w,{id:"description",value:i.description,onChange:s=>r({...i,description:s.target.value})})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",id:"isActive",checked:i.isActive,onChange:s=>r({...i,isActive:s.target.checked}),className:"h-4 w-4"}),e.jsx(d,{htmlFor:"isActive",children:"Active"})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(o,{type:"button",variant:"outline",onClick:()=>E(!1),children:"Cancel"}),e.jsx(o,{type:"submit",children:"Create Service"})]})]})})]})]}),e.jsx(q,{open:X,onOpenChange:k,children:e.jsxs(B,{children:[e.jsxs(W,{children:[e.jsx(R,{children:"Edit Service"}),e.jsx(_,{children:"Update service details"})]}),e.jsx(H,{children:e.jsxs("form",{onSubmit:ee,onKeyDown:$,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"edit-name",children:"Service Name *"}),e.jsx(w,{id:"edit-name",value:i.name,onChange:s=>r({...i,name:s.target.value}),required:!0})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"edit-price",children:"Price *"}),e.jsx(p,{id:"edit-price",decimal:!0,value:i.price,onChange:s=>r({...i,price:s}),required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"edit-minTime",children:"Min Time (min, optional)"}),e.jsx(p,{id:"edit-minTime",value:i.minTime,onChange:s=>r({...i,minTime:s})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"edit-maxTime",children:"Max Time (min, optional)"}),e.jsx(p,{id:"edit-maxTime",value:i.maxTime,onChange:s=>r({...i,maxTime:s})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"edit-description",children:"Description"}),e.jsx(w,{id:"edit-description",value:i.description,onChange:s=>r({...i,description:s.target.value})})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",id:"edit-isActive",checked:i.isActive,onChange:s=>r({...i,isActive:s.target.checked}),className:"h-4 w-4"}),e.jsx(d,{htmlFor:"edit-isActive",children:"Active"})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(o,{type:"button",variant:"outline",onClick:()=>{k(!1),z(null)},children:"Cancel"}),e.jsx(o,{type:"submit",children:"Update Service"})]})]})})]})})]}),e.jsx(A,{children:e.jsx(F,{className:"p-6",children:e.jsx("form",{onSubmit:I,className:"flex flex-col gap-4",children:e.jsxs("div",{className:"flex flex-1 items-center gap-2 min-w-0",children:[e.jsxs("div",{className:"relative flex-1 min-w-0",children:[e.jsx(K,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(w,{placeholder:"Search by name or description...",value:C,onChange:s=>P(s.target.value),onKeyDown:s=>s.key==="Enter"&&I(s),className:"pl-9"})]}),e.jsx(o,{type:"submit",variant:"secondary",size:"icon",className:"shrink-0 h-10 w-10",title:"Search",children:e.jsx(K,{className:"h-4 w-4"})}),m&&e.jsx(o,{type:"button",variant:"ghost",size:"sm",onClick:()=>{g(""),P(""),b(1)},children:"Clear"})]})})})}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:[h.length===0&&!u&&e.jsx(A,{className:"md:col-span-2 lg:col-span-3",children:e.jsx(F,{className:"p-0",children:e.jsx(pe,{illustration:"empty",title:m?"No services match your search":"No services yet",description:m?"Try a different search term.":"Add your first service to get started.",action:m?e.jsx(o,{variant:"outline",size:"sm",onClick:()=>{g(""),P(""),b(1)},children:"Clear search"}):null})})}),h.map(s=>e.jsxs(A,{children:[e.jsx(ne,{children:e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-wrap min-w-0",children:[e.jsx(ce,{className:"text-base",children:s.name}),e.jsx(oe,{status:s.isActive!==!1?"Active":"Inactive",positive:s.isActive!==!1})]}),e.jsxs("div",{className:"flex items-center gap-1 shrink-0",children:[e.jsx(o,{variant:"ghost",size:"icon",onClick:()=>se(s),"aria-label":"Edit",children:e.jsx(me,{className:"h-4 w-4"})}),e.jsx(o,{variant:"ghost",size:"icon",onClick:()=>ie(s._id),"aria-label":"Delete",className:"text-destructive hover:text-destructive",children:e.jsx(xe,{className:"h-4 w-4"})})]})]})}),e.jsx(F,{children:e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"text-2xl font-bold",children:de(s.price,Z)}),(s.minTime!=null||s.maxTime!=null)&&e.jsx("div",{className:"text-sm text-muted-foreground",children:s.minTime!=null&&s.maxTime!=null?`${s.minTime} - ${s.maxTime} min`:s.maxTime!=null?`Up to ${s.maxTime} min`:`${s.minTime} min (min)`}),s.description&&e.jsx("p",{className:"text-sm text-muted-foreground",children:s.description})]})})]},s._id))]}),v.totalPages>1&&e.jsx(A,{children:e.jsx(F,{className:"py-4",children:e.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-4",children:[e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Showing ",h.length===0?0:(x-1)*L+1,"â€“",(x-1)*L+h.length," of ",v.total]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(o,{variant:"outline",size:"sm",onClick:()=>O(x-1),disabled:x<=1,children:[e.jsx(he,{className:"h-4 w-4 mr-1"}),"Previous"]}),e.jsxs("span",{className:"text-sm px-2",children:["Page ",x," of ",v.totalPages]}),e.jsxs(o,{variant:"outline",size:"sm",onClick:()=>O(x+1),disabled:x>=v.totalPages,children:["Next",e.jsx(ue,{className:"h-4 w-4 ml-1"})]})]})]})})})]})}export{Ce as default};
