import{r as t,a as o,u as c,j as e,V as D,B as A,C as l,b as u,c as h,d as x,e as g}from"./index-DbUb8UN5.js";import{M as d,C as F,L,a as K}from"./LineChart-C3rJw0_d.js";import{f as M}from"./currencyUtils-CJd_f-r_.js";import{T as j}from"./trending-up-CurXscew.js";import{R as m,C as f,X as p,Y as C,T as v,B as O,a as q}from"./BarChart-BWS41ksB.js";const a={bar:"#FF7A45",grid:"#E8ECF4"};function W(){const[i,b]=t.useState(null),[y,T]=t.useState([]),[S,k]=t.useState([]),[E,N]=t.useState("USD"),[R,B]=t.useState(!0);t.useEffect(()=>{w()},[]),t.useEffect(()=>{o.get("/super-admin/settings").then(r=>{var n,s;(n=r.data)!=null&&n.success&&((s=r.data.settings)!=null&&s.defaultCurrency)&&N(r.data.settings.defaultCurrency)}).catch(()=>{})},[]);const w=async()=>{var r,n;try{const s=await o.get("/super-admin/dashboard");s.data.success?(b(s.data.stats),T(s.data.revenueTrend||[]),k(s.data.onboardingTrend||[])):c.error("Failed to load dashboard data")}catch(s){c.error(((n=(r=s.response)==null?void 0:r.data)==null?void 0:n.message)||"Failed to fetch dashboard data")}finally{B(!1)}};return R||!i?e.jsx("div",{className:"flex justify-center items-center w-full",children:e.jsx(D,{size:"section"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("h1",{className:"text-2xl font-semibold tracking-tight text-foreground",children:"Dashboard"}),e.jsx("p",{className:"text-muted-foreground text-sm",children:"Overview of your platform"})]}),e.jsxs("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-4",children:[e.jsx(d,{title:"Total Car Washes",value:i.totalBusinesses,subtitle:"Active businesses",icon:A,iconBg:"aqua",valueClassName:"text-foreground"}),e.jsx(d,{title:"Active Subscriptions",value:i.activePlans,subtitle:"Currently active",icon:F,iconBg:"success"}),e.jsx(d,{title:"Expired Subscriptions",value:i.expiredPlans,subtitle:"Need renewal",icon:j,iconBg:"warning"}),e.jsx(d,{title:"Monthly Revenue",value:M(i.monthlyRevenue,E),subtitle:"This month",icon:j,iconBg:"aqua",valueClassName:"text-foreground"})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs(l,{children:[e.jsxs(u,{children:[e.jsx(h,{children:"Revenue Trend"}),e.jsx(x,{children:"Monthly revenue over time"})]}),e.jsx(g,{children:e.jsx(m,{width:"100%",height:300,children:e.jsxs(L,{data:y,children:[e.jsx(f,{strokeDasharray:"3 3",stroke:a.grid}),e.jsx(p,{dataKey:"month",stroke:a.grid}),e.jsx(C,{stroke:a.grid}),e.jsx(v,{contentStyle:{borderRadius:12,border:"1px solid #E8ECF4"}}),e.jsx(K,{type:"monotone",dataKey:"revenue",stroke:a.bar,strokeWidth:2,dot:{r:4}})]})})})]}),e.jsxs(l,{children:[e.jsxs(u,{children:[e.jsx(h,{children:"Subscription Growth"}),e.jsx(x,{children:"New businesses over time"})]}),e.jsx(g,{children:e.jsx(m,{width:"100%",height:300,children:e.jsxs(O,{data:S,children:[e.jsx(f,{strokeDasharray:"3 3",stroke:a.grid}),e.jsx(p,{dataKey:"month",stroke:a.grid}),e.jsx(C,{stroke:a.grid}),e.jsx(v,{contentStyle:{borderRadius:12,border:"1px solid #E8ECF4"}}),e.jsx(q,{dataKey:"count",fill:a.bar,radius:[6,6,0,0]})]})})})]})]})]})}export{W as default};
